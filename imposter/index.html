<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <title>Imposter</title>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Bungee&family=Space+Grotesk:wght@400;500;600;700&display=swap");

    :root {
      --bg-0: #0d1016;
      --bg-1: #171c26;
      --panel: rgba(26, 33, 47, 0.88);
      --panel-border: rgba(255, 255, 255, 0.12);
      --text: #f3f6ff;
      --muted: #9eabc7;
      --member: #22d3ee;
      --imposter: #ef4444;
      --accent: #f59e0b;
      --ok: #22c55e;
      --danger: #f43f5e;
      --button: #2d3750;
      --button-hover: #3a4663;
      --radius-lg: 22px;
      --radius-md: 14px;
      --radius-sm: 10px;
      --safe-top-desktop: 45px;
      --safe-top-mobile: 120px;
      --safe-bottom-mobile: 120px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html,
    body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      touch-action: none;
      background: var(--bg-0);
      color: var(--text);
      font-family: "Space Grotesk", sans-serif;
    }

    body {
      position: relative;
    }

    #ambient-bg {
      position: fixed;
      inset: 0;
      background:
        radial-gradient(circle at 12% 16%, rgba(34, 211, 238, 0.18), transparent 32%),
        radial-gradient(circle at 85% 20%, rgba(245, 158, 11, 0.16), transparent 36%),
        radial-gradient(circle at 35% 90%, rgba(239, 68, 68, 0.14), transparent 42%),
        linear-gradient(150deg, var(--bg-0) 0%, var(--bg-1) 55%, #101723 100%);
      z-index: -2;
    }

    #grain {
      position: fixed;
      inset: 0;
      pointer-events: none;
      opacity: 0.18;
      z-index: -1;
      background-image: radial-gradient(rgba(255, 255, 255, 0.3) 0.6px, transparent 0.6px);
      background-size: 2px 2px;
      mix-blend-mode: soft-light;
    }

    .hidden {
      display: none !important;
    }

    #app {
      width: 100%;
      height: 100%;
      position: relative;
      display: grid;
      place-items: center;
      padding: 24px;
    }

    .screen {
      width: 100%;
      height: 100%;
      max-width: 980px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 16px;
      position: relative;
    }

    .panel {
      width: min(100%, 920px);
      border: 1px solid var(--panel-border);
      border-radius: var(--radius-lg);
      background: var(--panel);
      backdrop-filter: blur(8px);
    }

    .hero-card {
      width: min(100%, 580px);
      padding: 32px 28px;
      text-align: center;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 24px;
      background: linear-gradient(145deg, rgba(22, 29, 43, 0.94), rgba(17, 22, 34, 0.96));
    }

    .title {
      font-family: "Bungee", cursive;
      font-size: clamp(2.1rem, 7vw, 3rem);
      letter-spacing: 0.06em;
      color: var(--text);
      text-shadow: 0 0 22px rgba(34, 211, 238, 0.3);
    }

    .subtitle {
      margin-top: 10px;
      color: var(--muted);
      font-size: clamp(0.95rem, 2.8vw, 1.05rem);
      line-height: 1.5;
    }

    .btn-row {
      margin-top: 26px;
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .primary-btn,
    .secondary-btn,
    .ghost-btn,
    .mini-btn {
      border: none;
      outline: none;
      cursor: pointer;
      border-radius: var(--radius-md);
      font-family: "Space Grotesk", sans-serif;
      font-weight: 700;
      transition: transform 0.18s ease, background 0.18s ease;
    }

    .primary-btn,
    .secondary-btn,
    .ghost-btn {
      min-height: 52px;
      padding: 0 18px;
      min-width: 170px;
      font-size: 1rem;
    }

    .mini-btn {
      min-height: 42px;
      padding: 0 14px;
      font-size: 0.9rem;
      min-width: 98px;
    }

    .primary-btn {
      background: linear-gradient(135deg, #22d3ee 0%, #0ea5e9 100%);
      color: #06121a;
    }

    .primary-btn:hover {
      transform: translateY(-2px);
    }

    .secondary-btn {
      background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);
      color: #1b1202;
    }

    .secondary-btn:hover {
      transform: translateY(-2px);
    }

    .ghost-btn,
    .mini-btn {
      background: var(--button);
      color: var(--text);
      border: 1px solid rgba(255, 255, 255, 0.12);
    }

    .ghost-btn:hover,
    .mini-btn:hover {
      transform: translateY(-2px);
      background: var(--button-hover);
    }

    .ghost-btn:disabled,
    .primary-btn:disabled,
    .secondary-btn:disabled,
    .mini-btn:disabled {
      opacity: 0.45;
      cursor: not-allowed;
      transform: none;
    }

    .error-text {
      margin-top: 12px;
      color: var(--danger);
      font-size: 0.92rem;
      min-height: 1.2rem;
    }

    .join-panel {
      margin-top: 18px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      align-items: center;
    }

    input[type="text"],
    input[type="number"] {
      width: min(100%, 260px);
      height: 48px;
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: rgba(5, 9, 15, 0.6);
      color: var(--text);
      padding: 0 14px;
      font-size: 1rem;
      font-family: "Space Grotesk", sans-serif;
      text-align: center;
    }

    input[type="text"]:focus,
    input[type="number"]:focus {
      outline: none;
      border-color: var(--member);
    }

    .icon-btn {
      width: 48px;
      height: 48px;
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(8, 11, 18, 0.72);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: transform 0.15s ease, background 0.15s ease;
      z-index: 100;
      position: fixed;
    }

    #back-btn {
      left: 20px;
      top: var(--safe-top-desktop);
    }

    #settings-btn {
      right: 20px;
      top: var(--safe-top-desktop);
    }

    .icon-btn:hover {
      transform: translateY(-2px);
      background: rgba(18, 24, 36, 0.95);
    }

    .icon-btn svg {
      width: 22px;
      height: 22px;
      fill: currentColor;
    }

    #loading-screen {
      justify-content: center;
    }

    .spinner {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      border: 5px solid rgba(255, 255, 255, 0.18);
      border-top-color: var(--member);
      animation: spin 1s linear infinite;
      margin-bottom: 14px;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    .loading-text {
      font-size: 1rem;
      color: var(--muted);
    }

    #lobby-screen {
      justify-content: flex-start;
      padding-top: 22px;
      gap: 14px;
      overflow: auto;
      overflow-x: hidden;
      padding-bottom: 24px;
      touch-action: pan-y;
      -webkit-overflow-scrolling: touch;
    }

    .lobby-head {
      padding: 16px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 14px;
      flex-wrap: wrap;
    }

    .room-chip {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.12);
      font-size: 0.95rem;
      font-weight: 700;
    }

    #room-code-display {
      letter-spacing: 0.12em;
      font-size: 1.05rem;
      color: var(--accent);
    }

    #copy-code-btn {
      width: 34px;
      height: 34px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: rgba(255, 255, 255, 0.08);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }

    #copy-code-btn svg {
      width: 16px;
      height: 16px;
      fill: #d7def1;
    }

    #lobby-status {
      color: var(--muted);
      font-size: 0.92rem;
      font-weight: 600;
    }

    .lobby-grid {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 14px;
      width: min(100%, 920px);
    }

    .config-panel,
    .players-panel {
      padding: 18px;
      min-height: 300px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .section-title {
      font-family: "Bungee", cursive;
      font-size: 1.05rem;
      letter-spacing: 0.05em;
      color: #dde8ff;
    }

    .config-row {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 8px;
      align-items: center;
      background: rgba(255, 255, 255, 0.04);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 14px;
      padding: 10px 12px;
    }

    .config-row label {
      color: #d7def1;
      font-size: 0.92rem;
      font-weight: 600;
    }

    .config-value {
      font-weight: 700;
      color: var(--accent);
      min-width: 28px;
      text-align: right;
    }

    .config-row input[type="range"] {
      grid-column: 1 / 3;
      width: 100%;
      accent-color: var(--member);
    }

    #player-name-input {
      width: 100%;
      text-align: left;
      padding-left: 12px;
      padding-right: 12px;
    }

    #lobby-player-list {
      list-style: none;
      display: grid;
      gap: 8px;
      max-height: 260px;
      overflow-y: auto;
      padding-right: 4px;
    }

    .lobby-player-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 14px;
      padding: 10px 12px;
      font-size: 0.9rem;
    }

    .player-label {
      display: flex;
      align-items: center;
      gap: 8px;
      min-width: 0;
    }

    .player-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      flex-shrink: 0;
      background: rgba(255, 255, 255, 0.35);
    }

    .player-dot.ready {
      background: var(--ok);
    }

    .player-name {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .player-meta {
      color: var(--muted);
      font-size: 0.82rem;
      font-weight: 600;
      flex-shrink: 0;
    }

    .lobby-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: auto;
    }

    #game-screen {
      justify-content: flex-start;
      padding-top: 20px;
      padding-bottom: 24px;
      gap: 12px;
      overflow: auto;
      overflow-x: hidden;
      touch-action: pan-y;
      -webkit-overflow-scrolling: touch;
    }

    #game-hud {
      padding: 14px 16px;
      display: grid;
      grid-template-columns: auto 1fr auto;
      align-items: center;
      gap: 10px;
    }

    #phase-pill {
      border-radius: 999px;
      padding: 8px 12px;
      font-size: 0.76rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-weight: 700;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.14);
      color: #e2ebff;
    }

    #round-label {
      text-align: center;
      font-family: "Bungee", cursive;
      font-size: 0.92rem;
      color: #f6fbff;
    }

    #timer-label {
      font-weight: 700;
      color: var(--accent);
      min-width: 52px;
      text-align: right;
    }

    .phase-panel {
      padding: 18px;
      display: flex;
      flex-direction: column;
      gap: 14px;
      width: min(100%, 920px);
    }

    .phase-title {
      font-family: "Bungee", cursive;
      letter-spacing: 0.05em;
      font-size: clamp(1.1rem, 3vw, 1.4rem);
      color: #f7fbff;
      text-align: center;
    }

    .phase-subtitle {
      text-align: center;
      color: var(--muted);
      font-size: 0.95rem;
      line-height: 1.4;
    }

    .role-card {
      margin: 0 auto;
      width: min(100%, 380px);
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: rgba(255, 255, 255, 0.05);
      padding: 20px;
      text-align: center;
      display: flex;
      flex-direction: column;
      gap: 10px;
      animation: cardPop 0.35s ease;
    }

    @keyframes cardPop {
      from {
        opacity: 0;
        transform: translateY(10px) scale(0.97);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .role-badge {
      align-self: center;
      border-radius: 999px;
      padding: 7px 12px;
      letter-spacing: 0.08em;
      font-size: 0.72rem;
      text-transform: uppercase;
      font-weight: 700;
      border: 1px solid transparent;
    }

    .role-badge.member {
      background: rgba(34, 211, 238, 0.15);
      color: var(--member);
      border-color: rgba(34, 211, 238, 0.45);
    }

    .role-badge.imposter {
      background: rgba(239, 68, 68, 0.18);
      color: #ff8f8f;
      border-color: rgba(239, 68, 68, 0.5);
    }

    .secret-word {
      font-family: "Bungee", cursive;
      font-size: clamp(1rem, 4vw, 1.5rem);
      letter-spacing: 0.06em;
      color: #fef3c7;
      text-shadow: 0 0 16px rgba(245, 158, 11, 0.26);
      word-break: break-word;
    }

    .clue-actions {
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
    }

    /* ---- Clue Panel ---- */
    #clue-turn-name {
      text-align: center;
      font-family: "Bungee", cursive;
      font-size: clamp(1.4rem, 5vw, 1.9rem);
      color: var(--accent);
      letter-spacing: 0.04em;
      word-break: break-word;
    }

    .clue-turn-subtitle {
      text-align: center;
      color: var(--muted);
      font-size: 0.88rem;
    }

    #clue-input {
      width: 100%;
      text-align: left;
    }

    #clue-feed {
      list-style: none;
      display: grid;
      gap: 8px;
      max-height: 200px;
      overflow-y: auto;
      padding-right: 4px;
    }

    .clue-item {
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(255, 255, 255, 0.05);
      padding: 10px 12px;
      font-size: 0.9rem;
      line-height: 1.35;
    }

    .clue-name {
      color: var(--member);
      font-weight: 700;
      margin-right: 6px;
    }

    /* ---- Discussion Panel ---- */
    .discussion-section-label {
      font-size: 0.78rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-weight: 700;
      color: var(--muted);
      margin-bottom: -6px;
    }

    #discussion-clues-ref {
      list-style: none;
      display: grid;
      gap: 6px;
      max-height: 120px;
      overflow-y: auto;
    }

    .clue-ref-item {
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      background: rgba(255, 255, 255, 0.04);
      padding: 8px 10px;
      font-size: 0.85rem;
      line-height: 1.3;
    }

    .discussion-divider {
      width: 100%;
      height: 1px;
      background: rgba(255, 255, 255, 0.1);
      margin: 4px 0;
    }

    #chat-feed {
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-height: 80px;
      max-height: 220px;
      overflow-y: auto;
      padding: 4px 2px;
    }

    .chat-bubble {
      display: flex;
      flex-direction: column;
      gap: 2px;
      padding: 10px 14px;
      border-radius: 16px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.1);
      max-width: 85%;
      align-self: flex-start;
      animation: cardPop 0.2s ease;
    }

    .chat-bubble.mine {
      align-self: flex-end;
      background: rgba(34, 211, 238, 0.1);
      border-color: rgba(34, 211, 238, 0.25);
    }

    .chat-author {
      font-size: 0.76rem;
      font-weight: 700;
      color: var(--member);
    }

    .chat-bubble.mine .chat-author {
      color: var(--accent);
    }

    .chat-text {
      font-size: 0.9rem;
      line-height: 1.35;
      color: var(--text);
    }

    .chat-input-row {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .chat-input-row input {
      flex: 1;
      width: auto;
      text-align: left;
      padding-left: 14px;
      padding-right: 14px;
      border-radius: 14px;
    }

    .chat-input-row .mini-btn {
      min-width: 72px;
      border-radius: 14px;
    }

    #chat-counter {
      text-align: center;
      font-size: 0.8rem;
      color: var(--muted);
      font-weight: 600;
    }

    .discussion-bottom {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    #end-discussion-btn {
      width: 100%;
      border-radius: 14px;
    }

    #end-discussion-btn.active {
      background: rgba(34, 197, 94, 0.3);
      border-color: rgba(34, 197, 94, 0.6);
      color: #b4f0c9;
    }

    #discussion-roster {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: center;
    }

    .roster-item {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.1);
      font-size: 0.82rem;
      font-weight: 600;
    }

    .roster-item.me {
      border-color: rgba(34, 211, 238, 0.4);
    }

    .roster-item.ended {
      border-color: rgba(34, 197, 94, 0.5);
      background: rgba(34, 197, 94, 0.12);
    }

    .roster-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.3);
      flex-shrink: 0;
    }

    .roster-dot.done {
      background: var(--ok);
    }

    .roster-name {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100px;
    }

    /* ---- Vote Panel ---- */
    #vote-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }

    .vote-card {
      border-radius: 16px;
      border: 2px solid rgba(255, 255, 255, 0.14);
      background: rgba(255, 255, 255, 0.05);
      color: #e7efff;
      min-height: 70px;
      font-weight: 700;
      padding: 12px;
      cursor: pointer;
      transition: border-color 0.15s ease, background 0.15s ease, transform 0.15s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 1rem;
      position: relative;
    }

    .vote-card:hover {
      border-color: rgba(34, 211, 238, 0.55);
      transform: translateY(-1px);
      background: rgba(34, 211, 238, 0.1);
    }

    .vote-card.selected {
      border-color: var(--accent);
      background: rgba(245, 158, 11, 0.18);
      color: #fff4da;
    }

    .vote-card.locked {
      opacity: 0.55;
      cursor: not-allowed;
    }

    .vote-card-name {
      font-size: 1rem;
    }

    .vote-check-icon {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--accent);
      flex-shrink: 0;
    }

    .vote-timer-note {
      text-align: center;
      color: var(--muted);
      font-size: 0.82rem;
      font-weight: 600;
      font-style: italic;
    }

    /* ---- Result Panel ---- */
    #result-card {
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: rgba(255, 255, 255, 0.06);
      padding: 18px;
      display: grid;
      gap: 10px;
      text-align: center;
    }

    #result-winner.member {
      color: var(--member);
    }

    #result-winner.imposter {
      color: #ff8d8d;
    }

    #scoreboard,
    #match-scoreboard {
      list-style: none;
      display: grid;
      gap: 8px;
    }

    .score-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      border-radius: 14px;
      padding: 10px 12px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(255, 255, 255, 0.05);
      font-size: 0.92rem;
    }

    .score-item strong {
      color: #f8fbff;
      font-size: 1rem;
    }

    .score-item.me {
      border-color: rgba(34, 211, 238, 0.55);
      background: rgba(34, 211, 238, 0.12);
    }

    .score-item.eliminated {
      opacity: 0.55;
    }

    /* ---- Match Panel ---- */
    #match-subtitle {
      font-family: "Bungee", cursive;
      font-size: clamp(1.2rem, 4vw, 1.6rem);
      text-align: center;
      letter-spacing: 0.04em;
    }

    #match-subtitle.member-win {
      color: var(--member);
    }

    #match-subtitle.imposter-win {
      color: #ff8d8d;
    }

    #match-word {
      text-align: center;
      font-size: 1rem;
      font-weight: 700;
      color: var(--accent);
    }

    .muted-note {
      text-align: center;
      color: var(--muted);
      font-size: 0.88rem;
      line-height: 1.4;
    }

    #settings-modal {
      position: fixed;
      inset: 0;
      z-index: 210;
      display: grid;
      place-items: center;
      background: rgba(3, 6, 11, 0.76);
      backdrop-filter: blur(4px);
      padding: 16px;
    }

    .settings-card {
      width: min(100%, 360px);
      border-radius: 18px;
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: #171e2b;
      padding: 18px;
      display: grid;
      gap: 12px;
    }

    .settings-title {
      font-family: "Bungee", cursive;
      font-size: 1.05rem;
      letter-spacing: 0.05em;
      text-align: center;
    }

    .setting-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      border-radius: 14px;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: rgba(255, 255, 255, 0.05);
      padding: 10px 12px;
    }

    .setting-label {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 700;
      color: #dce7ff;
      font-size: 0.93rem;
    }

    .setting-label svg {
      width: 18px;
      height: 18px;
      fill: #f8cb68;
    }

    .toggle {
      width: 50px;
      height: 28px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.2);
      position: relative;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .toggle::after {
      content: "";
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: #fff;
      position: absolute;
      top: 3px;
      left: 3px;
      transition: left 0.2s ease;
    }

    .toggle.active {
      background: rgba(34, 197, 94, 0.72);
    }

    .toggle.active::after {
      left: 26px;
    }

    .pill-info {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      margin: 0 auto;
      padding: 7px 12px;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.1);
      color: #d3dff8;
      font-size: 0.82rem;
      font-weight: 600;
    }

    @media (max-width: 860px) {
      #app {
        padding: 14px;
      }

      .lobby-grid {
        grid-template-columns: 1fr;
      }

      #vote-grid {
        grid-template-columns: 1fr;
      }
    }

    @media (pointer: coarse) {
      html,
      body {
        height: 100%;
        overflow: hidden;
        touch-action: none;
      }

      #back-btn,
      #settings-btn {
        top: var(--safe-top-mobile);
      }

      #lobby-screen,
      #game-screen {
        padding-bottom: var(--safe-bottom-mobile);
      }

      .primary-btn,
      .secondary-btn,
      .ghost-btn {
        min-height: 56px;
        font-size: 1.02rem;
      }

      .mini-btn {
        min-height: 46px;
      }

      .icon-btn {
        width: 52px;
        height: 52px;
      }
    }
  </style>
</head>
<body>
  <div id="ambient-bg"></div>
  <div id="grain"></div>

  <button id="back-btn" class="icon-btn hidden" aria-label="Back">
    <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M14.7 5.3a1 1 0 0 1 0 1.4L10.41 11H20a1 1 0 1 1 0 2h-9.59l4.3 4.3a1 1 0 1 1-1.42 1.4l-6-6a1 1 0 0 1 0-1.4l6-6a1 1 0 0 1 1.41 0Z"/></svg>
  </button>

  <button id="settings-btn" class="icon-btn hidden" aria-label="Settings">
    <svg viewBox="0 0 24 24" aria-hidden="true"><path d="m19.43 12.98.04-.32a7.86 7.86 0 0 0 0-1.32l-.04-.32 2.11-1.65a.5.5 0 0 0 .12-.64l-2-3.46a.5.5 0 0 0-.6-.22l-2.49 1a8.1 8.1 0 0 0-1.14-.66l-.38-2.65a.5.5 0 0 0-.5-.42h-4a.5.5 0 0 0-.5.42l-.38 2.65c-.4.16-.78.38-1.14.66l-2.49-1a.5.5 0 0 0-.6.22l-2 3.46a.5.5 0 0 0 .12.64L4.57 11l-.04.32a7.86 7.86 0 0 0 0 1.32l.04.32-2.11 1.65a.5.5 0 0 0-.12.64l2 3.46a.5.5 0 0 0 .6.22l2.49-1c.36.28.74.5 1.14.66l.38 2.65a.5.5 0 0 0 .5.42h4a.5.5 0 0 0 .5-.42l.38-2.65c.4-.16.78-.38 1.14-.66l2.49 1a.5.5 0 0 0 .6-.22l2-3.46a.5.5 0 0 0-.12-.64l-2.11-1.65ZM12 15.5A3.5 3.5 0 1 1 12 8a3.5 3.5 0 0 1 0 7.5Z"/></svg>
  </button>

  <div id="settings-modal" class="hidden" role="dialog" aria-modal="true">
    <div class="settings-card">
      <h2 class="settings-title">Settings</h2>
      <div class="setting-row">
        <span class="setting-label">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 3a1 1 0 0 1 1 1v7.13a4 4 0 1 1-2 0V4a1 1 0 0 1 1-1Z"/></svg>
          Music
        </span>
        <button id="toggle-music" class="toggle" aria-label="Toggle music"></button>
      </div>
      <div class="setting-row">
        <span class="setting-label">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M14 3v10.09A4 4 0 1 0 16 16V7h4V3h-6Z"/></svg>
          FX
        </span>
        <button id="toggle-fx" class="toggle" aria-label="Toggle sound effects"></button>
      </div>
      <div class="setting-row">
        <span class="setting-label">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M7 5a5 5 0 0 0-5 5v4a5 5 0 0 0 5 5h1v3h2v-3h4v3h2v-3h1a5 5 0 0 0 5-5v-4a5 5 0 0 0-5-5H7Zm0 2h10a3 3 0 0 1 3 3v4a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3v-4a3 3 0 0 1 3-3Z"/></svg>
          Haptics
        </span>
        <button id="toggle-haptics" class="toggle" aria-label="Toggle haptics"></button>
      </div>
      <button id="settings-close" class="ghost-btn">Close</button>
    </div>
  </div>

  <main id="app">
    <section id="start-screen" class="screen">
      <div class="hero-card">
        <h1 class="title">IMPOSTER</h1>
        <p class="subtitle">
          Join from your own phone, get your private role card, and uncover the imposters before they blend in.
        </p>

        <div id="start-buttons" class="btn-row">
          <button id="create-room-btn" class="primary-btn">Create Room</button>
          <button id="join-room-btn" class="secondary-btn">Join Room</button>
        </div>

        <div id="join-room-section" class="join-panel hidden">
          <input id="join-room-input" type="text" maxlength="6" placeholder="ROOM CODE" autocomplete="off" spellcheck="false" />
          <div class="btn-row">
            <button id="join-submit-btn" class="primary-btn">Join Match</button>
            <button id="back-to-start" class="ghost-btn">Back</button>
          </div>
        </div>

        <p id="join-error" class="error-text hidden">Unable to join room.</p>
      </div>
    </section>

    <section id="loading-screen" class="screen hidden">
      <div class="spinner" aria-hidden="true"></div>
      <p class="loading-text" id="loading-text">Connecting to room...</p>
    </section>

    <section id="lobby-screen" class="screen hidden">
      <div class="panel lobby-head">
        <div class="room-chip">
          <span>Room</span>
          <span id="room-code-display">----</span>
          <button id="copy-code-btn" aria-label="Copy room code">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M16 1H5a2 2 0 0 0-2 2v12h2V3h11V1Zm3 4H9a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Zm0 16H9V7h10v14Z"/></svg>
          </button>
        </div>
        <div id="lobby-status">Waiting for players</div>
      </div>

      <div class="lobby-grid">
        <div class="panel config-panel" id="host-config-panel">
          <h2 class="section-title">Host Setup</h2>

          <div class="config-row">
            <label for="total-players-input">Total Players</label>
            <span id="total-players-value" class="config-value">2</span>
            <input id="total-players-input" type="range" min="2" max="10" step="1" value="2" />
          </div>

          <div class="config-row">
            <label for="imposters-input">Imposters</label>
            <span id="imposters-value" class="config-value">1</span>
            <input id="imposters-input" type="range" min="1" max="3" step="1" value="1" />
          </div>

          <div class="config-row">
            <label for="rounds-input">Rounds</label>
            <span id="rounds-value" class="config-value">5</span>
            <input id="rounds-input" type="range" min="3" max="9" step="1" value="5" />
          </div>

          <p class="muted-note" id="host-config-note">
            Host controls match settings. Others will sync automatically.
          </p>
        </div>

        <div class="panel players-panel">
          <h2 class="section-title">Players <span id="lobby-player-count">0/2</span></h2>
          <input id="player-name-input" type="text" maxlength="18" placeholder="Your name" autocomplete="off" spellcheck="false" />

          <ul id="lobby-player-list"></ul>

          <div class="lobby-actions">
            <button id="ready-btn" class="ghost-btn">Ready</button>
            <button id="start-match-btn" class="primary-btn">Start Match</button>
          </div>
        </div>
      </div>
    </section>

    <section id="game-screen" class="screen hidden">
      <div id="game-hud" class="panel">
        <div id="phase-pill">Lobby</div>
        <div id="round-label">Round 1 / 5</div>
        <div id="timer-label">--</div>
      </div>

      <div id="spectator-note" class="pill-info hidden">
        You joined mid-match as spectator. You can play next round.
      </div>

      <!-- Role Reveal -->
      <section id="role-panel" class="panel phase-panel hidden">
        <h2 class="phase-title">Private Role Card</h2>
        <p class="phase-subtitle" id="role-subtitle">Read your card privately before continuing.</p>
        <div class="role-card">
          <span id="role-badge" class="role-badge member">Member</span>
          <div id="role-word" class="secret-word">WORD</div>
          <p id="role-note" class="muted-note">Keep your card secret.</p>
        </div>
        <div class="clue-actions">
          <button id="reveal-ready-btn" class="primary-btn">I Understand</button>
        </div>
      </section>

      <!-- Clue Turn -->
      <section id="clue-panel" class="panel phase-panel hidden">
        <p class="clue-turn-subtitle">It is their turn to give a clue</p>
        <div id="clue-turn-name">Waiting</div>
        <input id="clue-input" type="text" maxlength="48" placeholder="Type one short clue" autocomplete="off" spellcheck="false" />
        <div class="clue-actions">
          <button id="submit-clue-btn" class="secondary-btn" style="min-width:120px;">Submit</button>
          <button id="next-player-btn" class="primary-btn hidden" style="min-width:140px;">Next Player</button>
        </div>
        <ul id="clue-feed"></ul>
      </section>

      <!-- Discussion -->
      <section id="discussion-panel" class="panel phase-panel hidden">
        <h2 class="phase-title">Discussion</h2>
        <p class="discussion-section-label">Clues this round</p>
        <ul id="discussion-clues-ref"></ul>
        <div class="discussion-divider"></div>
        <p class="discussion-section-label">Chat</p>
        <div id="chat-feed"></div>
        <div class="chat-input-row">
          <input id="chat-input" type="text" maxlength="120" placeholder="Type a message..." autocomplete="off" spellcheck="false" />
          <button id="send-chat-btn" class="mini-btn">Send</button>
        </div>
        <div id="chat-counter" class="muted-note">3/3 left</div>
        <div class="discussion-divider"></div>
        <div class="discussion-bottom">
          <button id="end-discussion-btn" class="ghost-btn">End Discussion</button>
          <div id="discussion-roster"></div>
        </div>
      </section>

      <!-- Voting -->
      <section id="vote-panel" class="panel phase-panel hidden">
        <h2 class="phase-title">Vote an Imposter</h2>
        <p class="phase-subtitle" id="vote-subtitle">Tap a player to select. Your vote is final when the timer ends.</p>
        <div id="vote-grid"></div>
        <p class="vote-timer-note">Your selection when the timer hits 0 is your final vote</p>
      </section>

      <!-- Round Result -->
      <section id="result-panel" class="panel phase-panel hidden">
        <h2 class="phase-title">Round Result</h2>
        <div id="result-card">
          <p id="result-winner" class="phase-subtitle">Members win</p>
          <p id="result-detail" class="muted-note">No elimination</p>
        </div>
        <ul id="scoreboard"></ul>
        <p class="muted-note" id="result-next-note">Preparing next round...</p>
      </section>

      <!-- Match End -->
      <section id="match-panel" class="panel phase-panel hidden">
        <h2 class="phase-title">Match Complete</h2>
        <p id="match-subtitle" class="phase-subtitle">Final standings</p>
        <p id="match-word" class="muted-note"></p>
        <ul id="match-scoreboard"></ul>
        <div class="clue-actions">
          <button id="play-again-btn" class="primary-btn">Play Again</button>
        </div>
      </section>
    </section>
  </main>

  <script type="module" src="/src/main.ts"></script>
</body>
</html>
